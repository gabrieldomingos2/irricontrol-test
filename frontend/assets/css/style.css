/* ================== */
/* üåå BASE DO SISTEMA */
/* ================== */
:root{
  --green:#22c55e;
  --bg:#060B10;
  --panel:rgba(6,11,16,0.7);
  --border:rgba(255,255,255,0.15);
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: sans-serif;
}

#map {
  height: 100%;
  width: 100%;
  z-index: 0;
}

/* ============================= */
/* ‚ú® BOT√ïES ESTILO VIDRO (GLASS) */
/* ============================= */
.glass-button {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: rgba(255, 255, 255, 0.7);
  transition: all 0.3s ease;
  cursor: pointer;
  box-shadow: none;
}
@supports not (backdrop-filter: blur(10px)) {
  .glass-button { background: rgba(255,255,255,0.06); }
}
.glass-button:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(34, 197, 94, 0.4);
  color: var(--green);
  box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);
}
.glass-button.hidden { display:none; }

.glass-button-active {
  background-color: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.6);
  color: var(--green);
  box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
}

/* ======================================= */
/* üü© ESTILO DOS BOT√ïES DA BARRA LATERAL   */
/* ======================================= */
.sidebar-button { transition: all 0.3s ease; }
.sidebar-button:hover {
  color: var(--green);
  background-color: rgba(255, 255, 255, 0.1);
  box-shadow: 0 0 8px rgba(34, 197, 94, 0.4);
}

/* ========================= */
/* Bot√£o Repetidora          */
/* ========================= */
#confirmar-repetidora {
  color: rgba(255, 255, 255, 0.7);
  transition: color 0.3s ease;
}
#confirmar-repetidora:hover { color: var(--green); }

/* ========================= */
/* üß† √çCONES                 */
/* ========================= */
.sidebar-icon{
  display:inline-block;
  background-color:currentColor;
  -webkit-mask-size:contain; mask-size:contain;
  -webkit-mask-position:center; mask-position:center;
  -webkit-mask-repeat:no-repeat; mask-repeat:no-repeat;
}

/* ==================== */
/* üí¨ MENSAGENS */
/* ==================== */
#mensagem{
  transition: opacity .5s ease-in-out, transform .5s ease-in-out;
  opacity:1; transform:translateY(0);
}
#mensagem.hidden{
  opacity:0; transform:translateY(20px);
  pointer-events:none;
}

/* ================ */
/* ‚ö° GLOW (opcional) */
/* ================ */
@keyframes pulseGlow{
  0%{ filter:drop-shadow(0 0 4px rgba(255,0,0,.7)); }
  50%{ filter:drop-shadow(0 0 14px rgba(255,0,0,1)); }
  100%{ filter:drop-shadow(0 0 4px rgba(255,0,0,.7)); }
}

/* ===================== */
/* üü¢ C√çRCULOS (Leaflet) */
/* ===================== */
.leaflet-interactive.circulo-verde{
  stroke:#34c759;
  stroke-width:1;
  fill-opacity:.5;
  fill:#34c759; /* ‚úÖ corrigido (era fill-color) */
}
.circulo-vermelho-pulsante{/* anima√ß√£o opcional
  animation: pulseGlow 2s infinite; */
}

/* ========================== */
/* üè∑Ô∏è LABEL FIXA DOS PIV√îS */
/* ========================== */
.pivo-marker-dot{
  width:100%; height:100%; border-radius:50%; opacity:.8;
  border:1px solid rgba(0,0,0,.3);
  box-sizing:border-box;
  transition: transform .2s ease-in-out, box-shadow .2s ease-in-out, opacity .2s;
}
.pivo-marker-container-selected .pivo-marker-dot{
  transform:scale(1.1); opacity:1;
  box-shadow:0 0 8px 3px rgba(255,255,255,.9);
}

.label-pivo{
  background-color:transparent!important;
  border:none!important; box-shadow:none!important; padding:0!important;
  color:#fff; font-weight:bold; font-size:12px; text-align:center;
  white-space:normal; pointer-events:none; line-height:1.3;
  text-shadow:
    0 0 5px rgba(0,0,0,1),
    1px 1px 3px rgba(0,0,0,.8);
}
.distancia-pivo{
  display:block; font-size:.85em; font-weight:normal; color:#ddd;
}

.source-name-pivo{ font-size:.9em; color:#c0c0c0; font-weight:normal; }

/* ======================= */
/* üìç POPUPS (Leaflet)     */
/* ======================= */
/* ‚úÖ use className: 'popup-glass' ao criar o popup */
.leaflet-popup.popup-glass .leaflet-popup-content-wrapper{
  background: transparent; box-shadow:none; border-radius:0; padding:0;
}
.leaflet-popup.popup-glass .leaflet-popup-tip-container{ display:none; }
.popup-glass-inner{
  backdrop-filter: blur(8px);
  background: rgba(0,0,0,.65);
  padding:10px 14px; border-radius:8px; font-weight:600; font-size:.85rem; color:#fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.4);
  border:1px solid var(--border);
}
@supports not (backdrop-filter: blur(8px)){
  .popup-glass-inner{ background: rgba(0,0,0,.8); }
}

/* ‚úÖ use className: 'popup-repeater' para os popups de repetidora */
.leaflet-popup.popup-repeater .leaflet-popup-content-wrapper{
  background-color: rgba(6,11,16,0.85)!important;
  color:#e5e7eb; padding:5px 10px!important; border-radius:6px!important;
  border:1px solid rgba(255,255,255,.1); box-shadow:0 2px 8px rgba(0,0,0,.5);
}
.leaflet-popup.popup-repeater .leaflet-popup-content{
  margin:0!important; font-size:.75rem; line-height:1.2; white-space:nowrap;
}
.leaflet-popup.popup-repeater .leaflet-popup-content span + span{ margin-left:.75rem; }
.leaflet-popup.popup-repeater .leaflet-popup-tip{
  background: rgba(6,11,16,0.85)!important;
}

/* ======================= */
/* üóÇÔ∏è PAIN√âIS */
/* ======================= */
#painel-dados, #painel-repetidoras{
  transition: opacity .3s ease, transform .3s ease;
}
#painel-dados.hidden, #painel-repetidoras.hidden{
  opacity:0; transform:translateX(20px); pointer-events:none;
}
#painel-dados .text-center{
  margin-top:.25rem; padding-top:.25rem; border-top-width:1px;
}

/* ========================= */
/* üõ∞Ô∏è LINHAS DIAGN√ìSTICO */
/* ========================= */
.linha-pontilhada{}
@keyframes growLine{ to{ stroke-dashoffset:0; } }

/* ========================= */
/* ‚ö†Ô∏è LABEL DE BLOQUEIO */
/* ========================= */
.label-bloqueio{
  background:none!important; border:none!important; box-shadow:none!important; padding:0!important; pointer-events:none;
}
.label-bloqueio i svg{
  width:20px; height:20px; stroke:#000!important; fill:none!important; stroke-width:2.5;
  filter:drop-shadow(0 1px 2px rgba(0,0,0,.7));
}

/* ======================= */
/* üìÇ INPUT FILE ESCONDIDO */
/* ======================= */
input[type="file"].hidden{ display:none; }

/* ========================= */
/* üéöÔ∏è SLIDER (Opacidade) */
/* ========================= */
.range-slider-custom{
  -webkit-appearance:none; appearance:none; width:100%;
  height:5px; background:#4A5568; border-radius:9999px; outline:none; opacity:.85; transition:opacity .2s;
}
.range-slider-custom:hover{ opacity:1; }
.range-slider-custom::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none; width:14px; height:14px; background-color:var(--green);
  border-radius:9999px; cursor:pointer; border:none; box-shadow:0 0 6px rgba(34,197,94,.7);
  transition: transform .2s;
}
.range-slider-custom:active::-webkit-slider-thumb{ transform:scale(1.2); }
.range-slider-custom::-moz-range-thumb{
  width:14px; height:14px; background-color:var(--green); border-radius:50%; cursor:pointer; border:none;
  box-shadow:0 0 6px rgba(34,197,94,.7); transition: transform .2s;
}
.range-slider-custom:active::-moz-range-thumb{ transform:scale(1.2); }

/* ================================== */
/* ‚úíÔ∏è BAL√ÉO DE INFO (tooltip sinal) */
/* ================================== */
.leaflet-tooltip.tooltip-sinal{
  background-color: rgba(6,11,16,.9)!important;
  color:#e5e7eb!important; border-radius:6px!important; padding:4px 8px!important;
  border:1px solid rgba(255,255,255,.1)!important; font-size:.7rem!important;
  box-shadow:0 2px 8px rgba(0,0,0,.5)!important; white-space:nowrap; transition:opacity .2s ease!important; opacity:0;
}
.leaflet-tooltip.tooltip-sinal span + span{ margin-left:.4rem; }
.leaflet-tooltip.tooltip-sinal.leaflet-tooltip-visible{ opacity:1; }
.leaflet-tooltip.tooltip-sinal::before{ display:none; }

/* ===================== */
/* Pin de Edi√ß√£o de Piv√¥ */
/* ===================== */
.pivo-edit-handle-custom-pin{ filter:drop-shadow(0 0 4px rgba(255,50,50,.8)); cursor:grab; }
.pivo-edit-handle-custom-pin:active{ cursor:grabbing; filter:drop-shadow(0 0 8px rgba(255,0,0,1)); }

/* ===================== */
/* üî• Cursores do Mouse */
/* ===================== */
#map, .leaflet-interactive{ cursor:default!important; }
button, .glass-button, label[for="arquivo"]{ cursor:pointer!important; }

/* ====================================== */
/* √çcones de candidatos a repetidora (AI) */
/* ====================================== */
.custom-div-icon-ponto-alto{ cursor:pointer; }
.candidate-icon-wrapper{
  position:relative; display:inline-block; text-align:center; color:#E0E0E0;
  font-weight:normal; font-size:10px; white-space:normal; line-height:1.3;
  padding:4px 7px; background-color: rgba(20,30,40,.85);
  border:1px solid rgba(255,255,255,.2); border-radius:5px;
  box-shadow:0 1px 5px rgba(0,0,0,.5);
}
.candidate-icon-wrapper .los-ok{ color:#4CAF50; font-weight:bold; }
.candidate-icon-wrapper .los-no{ color:#FF9800; font-weight:bold; }
.candidate-icon-wrapper .distancia-info{ color:#B0BEC5; }

.candidate-remove-btn{
  position:absolute; top:-9px; right:-9px; width:18px; height:18px; line-height:17px; text-align:center;
  font-size:14px; font-weight:bold; color:#fff; background-color:#D32F2F;
  border:1px solid rgba(255,255,255,.4); border-radius:50%; cursor:pointer; z-index:10;
  box-shadow:0 1px 3px rgba(0,0,0,.4);
  transition: background-color .2s ease, transform .2s ease;
}
.candidate-remove-btn:hover{ background-color:#E57373; transform:scale(1.1); }

/* ============================ */
/* ‚úíÔ∏è INPUT DE EDI√á√ÉO INLINE   */
/* ============================ */
.name-container{ flex-grow:1; cursor:pointer; }
.name-input{
  background:transparent; border:none; border-bottom:2px solid #38bdf8;
  padding:0; color:#e2e8f0; width:100%; font-size:inherit; font-weight:inherit; line-height:inherit;
}
.name-input:focus{ outline:none; }

/* ============================ */
/* ‚úíÔ∏è LEGENDA DE CORES (IMAGEM) */
/* ============================ */
#legend-container{
  backdrop-filter:blur(8px);
  background: rgba(10,15,20,.75);
  border:1px solid var(--border);
  border-radius:10px; padding:4px; box-shadow:0 4px 12px rgba(0,0,0,.5);
  top:4rem; right:.0rem; transition:opacity .3s ease, transform .3s ease; z-index:51;
}
@supports not (backdrop-filter: blur(8px)){
  #legend-container{ background: rgba(10,15,20,.9); }
}
#legend-image{
  max-width:42px; height:auto; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,.4);
}

/* Sanfona pain√©is */
.panel-content{
  max-height:600px; overflow:hidden;
  transition: max-height .5s ease-in-out, opacity .3s ease-in-out, margin .5s ease-in-out;
  opacity:1;
}
.panel.minimized .panel-content{ max-height:0; opacity:0; margin-top:0!important; margin-bottom:0!important; }
.panel.minimized .panel-content>*{ display:none; }

/* Transpar√™ncia ao minimizar */
.panel{ transition: background-color .4s ease, border-color .4s ease, backdrop-filter .4s ease, box-shadow .4s ease; }
.panel.minimized{
  background-color:transparent!important; border-color:transparent!important; backdrop-filter:none!important; box-shadow:none!important;
}
.panel h2{ transition: opacity .3s ease; }
.panel.minimized h2{ opacity:0; }

/* Loader custom */
.loading-logo-container{ position:relative; width:90px; height:90px; display:flex; align-items:center; justify-content:center; }
.loading-logo{ width:120px; height:auto; opacity:.9; }
.loading-spinner{
  position:absolute; inset:0; border:4px solid transparent; border-top-color:var(--green);
  border-radius:50%; animation: spin 1.5s linear infinite;
}
@keyframes spin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }

/* Logo do rodap√© */
#footer-logo-link{ opacity:.7; transition: opacity .3s ease, filter .3s ease; }
#footer-logo-link:hover{
  opacity:1;
  filter: brightness(0) saturate(100%) invert(58%) sepia(85%) saturate(548%) hue-rotate(95deg) brightness(95%) contrast(90%);
}

/* Tooltip de desenho */
.drawing-tooltip{
  position:absolute; background-color: rgba(10,15,20,.2); color:#ffffffa6;
  padding:2px 5px; border-radius:4px; font-size:11px; font-weight:bold;
  border:none; box-shadow:none; pointer-events:none; z-index:10001; white-space:nowrap; transition:opacity .1s ease;
}

/* Menu renomear */
.rename-menu{
  position:absolute; background-color: var(--panel); backdrop-filter: blur(12px);
  border:1px solid rgba(34,197,94,.3); border-radius:.5rem; box-shadow:0 4px 12px rgba(0,0,0,.5);
  padding:.5rem; z-index:10002; min-width:140px;
}
.rename-menu button{
  display:block; width:100%; text-align:left; padding:.5rem .75rem; color:#d1d5db; font-size:.875rem; font-weight:500; border-radius:.25rem;
  transition: background-color .2s ease, color .2s ease;
}
.rename-menu button:hover{ background-color: rgba(34,197,94,.15); color:#34d399; }

/* Onda de energia (√∫nica defini√ß√£o) */
@keyframes ondaEnergia{
  0%{ transform:scale(1); opacity:.8; }
  100%{ transform:scale(4); opacity:0; }
}
.pivo-marker-container-selected .pivo-marker-dot{
  position:relative; background-color:#fff; box-shadow:0 0 12px 3px rgba(255,255,255,.6);
}
.pivo-marker-container-selected .pivo-marker-dot::after{
  content:''; position:absolute; inset:0; border:2px solid rgba(255,255,255,.8); border-radius:50%;
  animation: ondaEnergia 2s infinite ease-out;
}

/* Sele√ß√£o global */
.selection-effect-wrapper{ position:relative; width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
.marker-selected .selection-effect-wrapper::after{
  content:''; position:absolute; inset:0; border:2px solid rgba(255,255,255,.8); border-radius:50%;
  animation: ondaEnergia 2s infinite ease-out; pointer-events:none;
}

.leaflet-div-icon-transparent{ background:transparent; border:none; }

/* üíé Modal de confirma√ß√£o */
#custom-confirm-overlay{ opacity:0; pointer-events:none; }
#custom-confirm-overlay:not(.hidden){ opacity:1; pointer-events:auto; }
#custom-confirm-box{ transform:scale(.95) translateY(10px); opacity:0; }
#custom-confirm-overlay:not(.hidden) #custom-confirm-box{ transform:scale(1) translateY(0); opacity:1; }
.confirm-btn-cancel, .confirm-btn-ok{ border:none; cursor:pointer; }
.confirm-btn-ok:hover{ transform:translateY(-1px); box-shadow:0 0 20px rgba(34,197,94,.6); }
.confirm-btn-cancel:hover{ color:#fff; }

/* Painel repetidoras: tipografia & espa√ßamento */
#lista-repetidoras span{ font-size:.75rem; }
#lista-repetidoras button{ font-size:.8rem; }
#lista-repetidoras button .sidebar-icon,
#lista-repetidoras button i[data-lucide]{ width:.875rem; height:.875rem; }
#lista-repetidoras > div > div:last-child{ gap:.6rem!important; }

/* Scrollbar lista repetidoras */
#lista-repetidoras{ max-height: calc(100vh - 360px); scrollbar-width: thin; scrollbar-color: var(--green) #1a202c; }
#lista-repetidoras::-webkit-scrollbar{ width:8px; }
#lista-repetidoras::-webkit-scrollbar-track{ background:#1a202c; border-radius:10px; }
#lista-repetidoras::-webkit-scrollbar-thumb{ background-color:var(--green); border-radius:10px; border:2px solid #1a202c; }
#lista-repetidoras::-webkit-scrollbar-thumb:hover{ background-color:#34d399; }

/* Largura pain√©is (telas grandes) */
#painel-dados, #painel-repetidoras{ width:260px; }

/* ========================= */
/* üìè RESPONSIVO */
/* ========================= */
@media (max-width:1366px){
  #lista-repetidoras{ max-height: calc(100vh - 320px); }

  div.absolute.top-0.left-0.right-0.h-14{
    height:3rem!important; padding-left:.5rem!important; padding-right:0!important;
  }
  div.absolute.top-0 .flex.items-center > span.text-sm.font-medium{ font-size:.7rem!important; margin-right:.25rem!important; }
  div.absolute.top-0 .glass-button{ padding:4px!important; border-radius:8px!important; }
  div.absolute.top-0 .glass-button .sidebar-icon,
  div.absolute.top-0 .glass-button i[data-lucide]{ width:16px!important; height:16px!important; }

  div.absolute.top-0 .flex.items-center.ml-24{ margin-left:6vw!important; }
  div.absolute.top-0 .flex.items-center.ml-\[20px\]{ margin-left:3vw!important; }
  div.absolute.top-0 .flex.items-center.gap-2{ gap:.3rem!important; }

  #editar-pivos.glass-button{ padding:2px!important; }
  #editar-pivos.glass-button i[data-lucide]{ width:14px!important; height:14px!important; }

  div.absolute.top-14.bottom-14.left-0.w-\[280px\]{ width:220px!important; padding:.75rem!important; top:3rem!important; }
  div.absolute.top-14 .mb-4.backdrop-blur{ padding:4px 8px!important; }
  div.absolute.top-14 .mb-4.backdrop-blur label, 
  div.absolute.top-14 .mb-4.backdrop-blur select{ font-size:.75rem!important; }
  div.absolute.top-14 .focus-within\:ring-1{ height:2.25rem!important; }
  div.absolute.top-14 #lat-long-input-field{ font-size:.75rem!important; }
  .sidebar-button{ height:2.25rem!important; padding-left:.5rem!important; padding-right:.5rem!important; }
  .sidebar-button .sidebar-icon{ width:18px!important; }
  .sidebar-button span.text-sm{ font-size:.7rem!important; }

  div.absolute.top-14.bottom-14.left-\[280px\].right-12{ top:3rem!important; left:220px!important; bottom:2.5rem!important; }

  #overlay-panels-container{ top:3.5rem!important; right:3.5rem!important; }
  #painel-dados, #painel-repetidoras{ width:220px!important; padding:.4rem!important; }
  #painel-dados h2, #painel-repetidoras h2, #painel-dados p, #template-info{ font-size:.65rem!important; line-height:1.4!important; }
  #lista-repetidoras{ font-size:.6rem!important; }
  #lista-repetidoras > div{ padding-top:.2rem!important; padding-bottom:.2rem!important; align-items:center; }
  #lista-repetidoras button{ font-size:.7rem!important; padding:1px!important; }
  #lista-repetidoras button .sidebar-icon,
  #lista-repetidoras button i[data-lucide]{ width:.75rem!important; height:.75rem!important; }
  #lista-repetidoras > div > div:last-child{ gap:.3rem!important; }

  #painel-repetidora{
    width:100%!important; padding:.4rem!important; margin-top:.5rem!important; border-radius:.75rem!important;
  }
  #painel-repetidora h2{ font-size:.7rem!important; margin-bottom:.4rem!important; }
  #painel-repetidora label{ font-size:.65rem!important; margin-bottom:2px!important; }
  #painel-repetidora input[type="number"], #painel-repetidora #confirmar-repetidora{
    height:26px!important; font-size:.7rem!important;
  }
  #painel-repetidora input[type="number"]{ margin-bottom:.4rem!important; }
  #painel-repetidora #confirmar-repetidora .sidebar-icon{ width:16px!important; height:16px!important; }

  #legend-container{ top:3.5rem!important; right:.25rem!important; padding:3px!important; }
  #legend-image{ max-width:36px!important; }

  div.absolute.bottom-6.left-72{ left:228px!important; bottom:1.2rem!important; }
  #range-opacidade{ width:70px!important; }

  div.absolute.bottom-4.left-1\/2{ bottom:.5rem!important; }
  #footer-logo-link img{ height:1.5rem!important; }

  button[data-lang] img{ width:20px!important; height:13px!important; }
  div.absolute.top-0 > .flex.items-center.gap-3{ gap:.5rem!important; }
}

@media (max-width:768px){
  .absolute.top-14.bottom-14.left-0.w-\[280px\]{ display:none; }
  .absolute.top-14.bottom-14.left-\[280px\].right-12{ left:0!important; right:0!important; }
  div.absolute.top-0 .flex.items-center > span{ display:none; }
  #overlay-panels-container{
    top:50%!important; left:50%!important; right:auto!important; transform:translate(-50%,-50%)!important; width:90%!important;
  }
}
@media (max-width:480px){
  div.absolute.top-0.left-0.right-0{ display:none; }
  #map{ height:100vh; }
  #overlay-panels-container{ display:none; }
  #mobile-buttons-container{
    position:absolute; bottom:1rem; left:50%; transform:translateX(-50%);
    z-index:50; display:flex; gap:1rem;
  }
}

/* ========================= */
/* ‚ôøÔ∏è REDUZIR MOVIMENTO */
/* ========================= */
@media (prefers-reduced-motion: reduce){
  .loading-spinner,
  .pivo-marker-container-selected .pivo-marker-dot::after,
  .marker-selected .selection-effect-wrapper::after,
  .linha-pontilhada{
    animation: none !important;
  }
  .range-slider-custom:active::-webkit-slider-thumb,
  .range-slider-custom:active::-moz-range-thumb{
    transform:none !important;
  }
}